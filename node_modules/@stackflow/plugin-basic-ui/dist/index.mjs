var te=Object.defineProperty,Te=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var Ve=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable;var ee=(e,o,r)=>o in e?te(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,re=(e,o)=>{for(var r in o||(o={}))Ve.call(o,r)&&ee(e,r,o[r]);if(Q)for(var r of Q(o))Ae.call(o,r)&&ee(e,r,o[r]);return e},oe=(e,o)=>Te(e,Be(o));var De=(e,o)=>{for(var r in o)te(e,r,{get:o[r],enumerable:!0})};import{assignInlineVars as Ge}from"@vanilla-extract/dynamic";import se,{createContext as We,useContext as je}from"react";var F={};De(F,{android:()=>He,cupertino:()=>Oe,globalVars:()=>i,rootAndroid:()=>Fe,rootCupertino:()=>$e});var He="_1coppmz0",Oe="_1coppmz1",i={backgroundColor:"var(--stackflow-plugin-basic-ui-background-color)",dimBackgroundColor:"var(--stackflow-plugin-basic-ui-dim-background-color)",appBar:{borderColor:"var(--stackflow-plugin-basic-ui-app-bar-border-color)",borderSize:"var(--stackflow-plugin-basic-ui-app-bar-border-size)",height:"var(--stackflow-plugin-basic-ui-app-bar-height)",iconColor:"var(--stackflow-plugin-basic-ui-app-bar-icon-color)",textColor:"var(--stackflow-plugin-basic-ui-app-bar-text-color)",backgroundColor:"var(--stackflow-plugin-basic-ui-app-bar-background-color)"},bottomSheet:{borderRadius:"var(--stackflow-plugin-basic-ui-bottom-sheet-border-radius)"},modal:{borderRadius:"var(--stackflow-plugin-basic-ui-bottom-sheet-border-radius)"}},Fe=":root[data-stackflow-plugin-basic-ui-theme=android]",$e=":root[data-stackflow-plugin-basic-ui-theme=cupertino]";function R(e){return Object.entries(e).reduce((o,[r,t])=>(t!=null&&(o[r]=t),o),{})}function T(e,o,r){let t=()=>{e.removeEventListener(o,t),r()};e.addEventListener(o,t)}var ae=e=>(e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)});var ne=()=>{};function B(e){requestAnimationFrame(()=>{requestAnimationFrame(()=>{e()})})}var ie=We({theme:"android"}),Xe=ie.Provider;function V(){return je(ie)}var Ue=e=>()=>({key:"basic-ui",wrapStack({stack:o}){var r,t,a,n,c,l,s;return se.createElement(Xe,{value:e},se.createElement("div",{className:typeof window!="undefined"?F[e.theme]:void 0,style:Ge(R({[i.backgroundColor]:e.backgroundColor,[i.dimBackgroundColor]:e.dimBackgroundColor,[i.appBar.borderColor]:(r=e.appBar)==null?void 0:r.borderColor,[i.appBar.borderSize]:(t=e.appBar)==null?void 0:t.borderSize,[i.appBar.height]:(a=e.appBar)==null?void 0:a.height,[i.appBar.iconColor]:(n=e.appBar)==null?void 0:n.iconColor,[i.appBar.textColor]:(c=e.appBar)==null?void 0:c.textColor,[i.bottomSheet.borderRadius]:(l=e.bottomSheet)==null?void 0:l.borderRadius,[i.modal.borderRadius]:(s=e.modal)==null?void 0:s.borderRadius}))},o.render()))}});import{useActions as lt,useActivity as dt}from"@stackflow/react";import{assignInlineVars as pt}from"@vanilla-extract/dynamic";import w,{useRef as P}from"react";import{useEffect as Ye,useState as Ze}from"react";function L(e){let[o,r]=Ze(void 0);return Ye(()=>{B(()=>{r(e)})},[e]),o}import{useEffect as Je,useState as Ke}from"react";function ce({outerRef:e,innerRef:o,enable:r}){let[t,a]=Ke(void 0);return Je(()=>{let n=e&&"current"in e&&e.current,c=o.current;return!r||!n||!c?ne:ae(()=>{let s=n.clientWidth,d=c.offsetLeft,f=c.clientWidth,y=s-d-f,u=Math.max(d,y);a(s-2*u)})},[]),{maxWidth:t}}import{useActivity as Qe}from"@stackflow/react";import{useEffect as le}from"react";var M={};function C({styleName:e,refs:o,effect:r}){let t=Qe();le(()=>(M[e]||(M[e]=new Map),M[e].set(t.zIndex,{refs:o,hasEffect:!!r}),()=>{M[e].delete(t.zIndex)}),[t.id,o,r]),le(()=>{if(!r)return()=>{};let a=(()=>{let c=[];for(let l=1;l<=t.zIndex;l+=1){let s=M[e].get(t.zIndex-l);if(s!=null&&s.refs&&(c=[...c,...s.refs]),s!=null&&s.hasEffect)break}return c})(),n=r({activityTransitionState:t.transitionState,refs:a});return()=>{n==null||n()}},[t.transitionState])}function de({refs:e,hasEffect:o}){C({styleName:"hide",refs:e,effect:o?({activityTransitionState:r,refs:t})=>{switch(r){case"enter-done":{t.forEach(a=>{!a.current||(a.current.style.display="none")});break}default:{t.forEach(a=>{!a.current||(a.current.style.display="")});break}}}:void 0})}var et=32,A=80;function pe({refs:e,theme:o,hasEffect:r}){C({styleName:"offset",refs:e,effect:r?({activityTransitionState:t,refs:a})=>{let n=o==="cupertino"?`translateX(-${A/16}rem)`:`translateY(-${et/16}rem)`;switch(t){case"enter-active":case"enter-done":{a.forEach(c=>{!c.current||(c.current.style.transition="var(--stackflow-transition-duration)",c.current.style.transform=n)});break}case"exit-active":case"exit-done":{B(()=>{a.forEach(c=>{if(!c.current)return;let l=c.current;l.style.transform="",T(l,"transitionend",()=>{l.style.transition=""})})});break}default:break}}:void 0})}function me({theme:e,dimRef:o,edgeRef:r,paperRef:t,hasEffect:a,onSwiped:n}){C({styleName:"swipe-back",refs:[t],effect:a?({refs:c})=>{if(e!=="cupertino")return()=>{};if(!o.current||!r.current||!t.current)return()=>{};let l=o.current,s=r.current,d=t.current,f=null,y=null,u=null,g=[],m=()=>{f=null,y=null,u=null,g=[]},q=!1;function z(v){q||(q=!0,requestAnimationFrame(()=>{let p=v/d.clientWidth;l.style.opacity=`${1-p}`,l.style.transition="0s",d.style.overflowY="hidden",d.style.transform=`translateX(${v}px)`,d.style.transition="0s",c.forEach(b=>{var x;!b.current||(b.current.style.transform=`translateX(${-1*(1-p)*A}px)`,b.current.style.transition="0s",((x=b.current.parentElement)==null?void 0:x.style.display)==="none"&&(b.current.parentElement.style.display="block"))}),q=!1}))}function h({swiped:v}){requestAnimationFrame(()=>{l.style.opacity=`${v?0:1}`,l.style.transition="var(--stackflow-transition-duration)",d.style.overflowY="hidden",d.style.transform=`translateX(${v?"100%":"0"})`,d.style.transition="var(--stackflow-transition-duration)",c.forEach(p=>{!p.current||(p.current.style.transition="var(--stackflow-transition-duration)",p.current.style.transform=`translateX(${v?"0":`-${A/16}rem`})`)}),T(d,"transitionend",()=>{l.style.opacity="",d.style.overflowY="",d.style.transform="",c.forEach((p,b)=>{if(!p.current)return;let x=g[b];v?(p.current.style.transition="",p.current.style.transform="",p.current.parentElement&&(p.current.parentElement.style.display="")):x&&(p.current.style.transition=x.style.transition,p.current.style.transform=x.style.transform,p.current.parentElement&&x.parentElement&&(p.current.parentElement.style.display=x.parentElement.style.display))})})})}let I=v=>{var b;let{activeElement:p}=document;(b=p==null?void 0:p.blur)==null||b.call(p),f=u=v.touches[0].clientX,y=Date.now(),g=c.map(x=>x.current?{style:{transform:x.current.style.transform,transition:x.current.style.transition},parentElement:x.current.parentElement?{style:{display:x.current.parentElement.style.display}}:void 0}:{style:{transform:"",transition:""}})},_=v=>{if(!f){m();return}u=v.touches[0].clientX,z(u-f)},S=()=>{if(!f||!y||!u){m();return}let v=Date.now(),b=(u-f)/(v-y)>1||u/d.clientWidth>.4;b&&(n==null||n()),m(),h({swiped:b})};return s.addEventListener("touchstart",I,{passive:!0}),s.addEventListener("touchmove",_,{passive:!0}),s.addEventListener("touchend",S,{passive:!0}),s.addEventListener("touchcancel",S,{passive:!0}),()=>{s.removeEventListener("touchstart",I),s.removeEventListener("touchmove",_),s.removeEventListener("touchend",S),s.removeEventListener("touchcancel",S)}}:void 0})}import{useActions as at,useActivity as nt}from"@stackflow/react";import{assignInlineVars as st}from"@vanilla-extract/dynamic";import k,{useRef as it}from"react";import fe from"react";var tt=e=>fe.createElement("svg",{className:e.className,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe.createElement("path",{d:"M11.5659 5.56564C11.8783 5.25322 11.8783 4.74669 11.5659 4.43427C11.2535 4.12185 10.7469 4.12185 10.4345 4.43427L3.43451 11.4343C3.12209 11.7467 3.12209 12.2532 3.43451 12.5656L10.4345 19.5656C10.7469 19.8781 11.2535 19.8781 11.5659 19.5656C11.8783 19.2532 11.8783 18.7467 11.5659 18.4343L5.93157 12.8H20.0002C20.442 12.8 20.8002 12.4418 20.8002 12C20.8002 11.5581 20.442 11.2 20.0002 11.2H5.93157L11.5659 5.56564Z",fill:"currentColor"})),D=tt;import $ from"react";var rt=e=>$.createElement("svg",{className:e.className,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},$.createElement("path",{d:"M6.56588 5.43433C6.25346 5.12191 5.74693 5.12191 5.43451 5.43433C5.12209 5.74675 5.12209 6.25328 5.43451 6.5657L10.8688 12L5.43451 17.4343C5.12209 17.7467 5.12209 18.2533 5.43451 18.5657C5.74693 18.8781 6.25346 18.8781 6.56588 18.5657L12.0002 13.1314L17.4345 18.5657C17.7469 18.8781 18.2535 18.8781 18.5659 18.5657C18.8783 18.2533 18.8783 17.7467 18.5659 17.4343L13.1316 12L18.5659 6.5657C18.8783 6.25328 18.8783 5.74675 18.5659 5.43433C18.2535 5.12191 17.7469 5.12191 17.4345 5.43433L12.0002 10.8686L6.56588 5.43433Z",fill:"currentColor"}),$.createElement("path",{d:"M6.56588 5.43433C6.25346 5.12191 5.74693 5.12191 5.43451 5.43433C5.12209 5.74675 5.12209 6.25328 5.43451 6.5657L10.8688 12L5.43451 17.4343C5.12209 17.7467 5.12209 18.2533 5.43451 18.5657C5.74693 18.8781 6.25346 18.8781 6.56588 18.5657L12.0002 13.1314L17.4345 18.5657C17.7469 18.8781 18.2535 18.8781 18.5659 18.5657C18.8783 18.2533 18.8783 17.7467 18.5659 17.4343L13.1316 12L18.5659 6.5657C18.8783 6.25328 18.8783 5.74675 18.5659 5.43433C18.2535 5.12191 17.7469 5.12191 17.4345 5.43433L12.0002 10.8686L6.56588 5.43433Z",fill:"currentColor"})),G=rt;import{createRuntimeFn as ue}from"@vanilla-extract/recipes/createRuntimeFn";var he=ue({defaultClassName:"_1yk3a450 dhthxq4 dhthxq8 dhthxq7 dhthxq0 dhthxqg _1dlf4347",variantClassNames:{border:{true:"_1yk3a451"}},defaultVariants:{},compoundVariants:[]}),W="_1yk3a453 dhthxq8 dhthxq7 dhthxqa dhthxqe dhthxqh",xe="_1yk3a455 dhthxq8 dhthxq7",ve=ue({defaultClassName:"_1yk3a456",variantClassNames:{hasLeft:{true:"_1yk3a457"}},defaultVariants:{},compoundVariants:[]}),ye="_1yk3a458 dhthxqb dhthxqc dhthxq0",be="_1yk3a453 dhthxq8 dhthxq7 dhthxqa dhthxqe dhthxqh",ge="_1yk3a452 dhthxq8 dhthxq7 dhthxq1",Ce="_1yk3a459 dhthxq8 dhthxq7 dhthxq1 dhthxq5";import{createRuntimeFn as j}from"@vanilla-extract/recipes/createRuntimeFn";var ke=j({defaultClassName:"dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 dhthxqb",variantClassNames:{transitionState:{"enter-active":"_1dlf4349","enter-done":"_1dlf434a","exit-active":"_1dlf434b","exit-done":"_1dlf434c"}},defaultVariants:{},compoundVariants:[]});var Ee="_1dlf434i dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 _1dlf4346 _1dlf4348",qe=j({defaultClassName:"_1dlf434l dhthxq4 dhthxq2 dhthxq3 dhthxq1",variantClassNames:{hasAppBar:{true:"_1dlf434m"}},defaultVariants:{},compoundVariants:[]});var Re=j({defaultClassName:"_1dlf434j dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 _1dlf4347 _1dlf4348",variantClassNames:{hasAppBar:{true:"_1dlf434k dhthxqf"}},defaultVariants:{},compoundVariants:[]}),N={transitionDuration:"var(--_1dlf4340)",zIndexes:{dim:"var(--_1dlf4341)",paper:"var(--_1dlf4342)",edge:"var(--_1dlf4343)",appBar:"var(--_1dlf4344)"},appBar:{center:{mainWidth:"var(--_1dlf4345)"}}};var ct=k.forwardRef(({title:e,appendLeft:o,appendRight:r,backButton:t,closeButton:a,closeButtonLocation:n="left",border:c=!0,iconColor:l,textColor:s,borderColor:d,borderSize:f,height:y,backgroundColor:u},g)=>{var J;let m=at(),q=nt(),z=V(),h=(J=z.appBar)==null?void 0:J.closeButton,I=it(null),{maxWidth:_}=ce({outerRef:g,innerRef:I,enable:z.theme==="cupertino"}),S=E=>{t&&"onClick"in t&&t.onClick&&t.onClick(E),E.defaultPrevented||m.pop()},v=q.zIndex===0||q.zIndex===1&&q.transitionState==="enter-active"&&q.pushedBy.name==="Replaced",p=()=>{var E;return v?null:t?"render"in t&&t.render?(E=t.render)==null?void 0:E.call(t):k.createElement("button",{type:"button",className:W,onClick:S},"renderIcon"in t&&t.renderIcon?t.renderIcon():k.createElement(D,null)):k.createElement("button",{type:"button",className:W,onClick:S},k.createElement(D,null))},b=E=>{var K;a&&"onClick"in a&&a.onClick&&a.onClick(E),!E.defaultPrevented&&h&&"onClick"in h&&((K=h.onClick)==null||K.call(h,E))},x=()=>{var E;return!a&&!((E=z.appBar)!=null&&E.closeButton)||!v?null:a&&"render"in a&&a.render?a.render():h&&"render"in h&&h.render?h.render():k.createElement("button",{type:"button",className:be,onClick:b},(()=>a&&"renderIcon"in a&&a.renderIcon?a.renderIcon():h&&"renderIcon"in h&&h.renderIcon?h.renderIcon():k.createElement(G,null))())},Pe=!!(n==="left"&&a||t||o);return k.createElement("div",{ref:g,className:he({border:c}),style:st(R({[i.appBar.iconColor]:l,[i.appBar.textColor]:s,[i.appBar.borderColor]:d,[i.appBar.borderSize]:f,[i.appBar.height]:y,[i.appBar.backgroundColor]:u||i.backgroundColor,[N.appBar.center.mainWidth]:`${_}px`}))},k.createElement("div",{className:ge},n==="left"&&x(),p(),o==null?void 0:o()),k.createElement("div",{ref:I,className:xe},k.createElement("div",{className:ve({hasLeft:Pe})},typeof e=="string"?k.createElement("div",{className:ye},e):e)),k.createElement("div",{className:Ce},r==null?void 0:r(),n==="right"&&x()))}),Se=ct;var mt=({backgroundColor:e,dimBackgroundColor:o,appBar:r,children:t})=>{let a=V(),n=dt(),{pop:c}=lt(),l=P(null),s=P(null),d=P(null),f=P(null),y=P(null);de({refs:[l],hasEffect:!0}),pe({theme:a.theme,refs:a.theme==="cupertino"?[d]:[d,y],hasEffect:!0}),me({theme:a.theme,dimRef:s,edgeRef:f,paperRef:d,hasEffect:!0,onSwiped(){c()}});let u=n.zIndex===0,g=!!r,m=n.zIndex*5,q=m,z=m+(a.theme==="cupertino"&&g?1:3),h=m+4,I=m+7,{transitionState:_}=n,S=L(_);return w.createElement("div",{ref:l,className:ke({transitionState:_==="enter-done"||_==="exit-done"?_:S}),style:pt(R({[i.backgroundColor]:e,[i.dimBackgroundColor]:o,[i.appBar.height]:r==null?void 0:r.height,[N.zIndexes.dim]:`${q}`,[N.zIndexes.paper]:`${z}`,[N.zIndexes.edge]:`${h}`,[N.zIndexes.appBar]:`${I}`,[N.transitionDuration]:n.transitionState==="enter-active"||n.transitionState==="exit-active"?"var(--stackflow-transition-duration)":"0ms"}))},w.createElement("div",{className:Ee,ref:s}),w.createElement("div",{key:n.id,className:Re({hasAppBar:g}),ref:d},t),!u&&a.theme==="cupertino"&&w.createElement("div",{className:qe({hasAppBar:g}),ref:f}),r&&w.createElement(Se,oe(re({},r),{ref:y})))},ft=mt;import{useActions as xt,useActivity as vt}from"@stackflow/react";import{assignInlineVars as yt}from"@vanilla-extract/dynamic";import X,{useRef as U}from"react";import{createRuntimeFn as ut}from"@vanilla-extract/recipes/createRuntimeFn";var Ne=ut({defaultClassName:"dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 dhthxqb",variantClassNames:{transitionState:{"enter-active":"_1ht38h04","enter-done":"_1ht38h05","exit-active":"_1ht38h06","exit-done":"_1ht38h07"}},defaultVariants:{},compoundVariants:[]}),ze="_1ht38h0d dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 dhthxqb dhthxq9 dhthxq7 _1ht38h03";var Ie="_1ht38h0e dhthxqb _1ht38h03",H={transitionDuration:"var(--_1ht38h00)",zIndexes:{dim:"var(--_1ht38h01)",paper:"var(--_1ht38h02)"}};var bt=({borderRadius:e="1rem",backgroundColor:o,dimBackgroundColor:r,onOutsideClick:t,children:a})=>{let n=vt(),{pop:c}=xt(),l=U(null),s=U(null);C({styleName:"hide",refs:[l]}),C({styleName:"offset",refs:[s]}),C({styleName:"swipe-back",refs:[s]});let d=U(!1),f=m=>{t==null||t(m),!m.defaultPrevented&&(d.current||(d.current=!0,c()))},y=m=>{m.stopPropagation()},u=n.zIndex*5+3,g=n.zIndex*5+4;return X.createElement("div",{className:Ne({transitionState:L(n.transitionState)}),ref:l,style:yt(R({[i.bottomSheet.borderRadius]:e,[i.backgroundColor]:o,[i.dimBackgroundColor]:r,[H.zIndexes.dim]:`${u}`,[H.zIndexes.paper]:`${g}`,[H.transitionDuration]:n.transitionState==="enter-active"||n.transitionState==="exit-active"?"var(--stackflow-transition-duration)":"0ms"}))},X.createElement("div",{className:ze,ref:s,onClick:f},X.createElement("div",{className:Ie,onClick:y},a)))},gt=bt;import{useActions as Et,useActivity as qt}from"@stackflow/react";import{assignInlineVars as Rt}from"@vanilla-extract/dynamic";import Y,{useRef as Z}from"react";import{createRuntimeFn as Ct}from"@vanilla-extract/recipes/createRuntimeFn";var Le=Ct({defaultClassName:"dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 dhthxqb",variantClassNames:{transitionState:{"enter-active":"_5ozg8c4","enter-done":"_5ozg8c5","exit-active":"_5ozg8c6","exit-done":"_5ozg8c7"}},defaultVariants:{},compoundVariants:[]}),Me="_5ozg8cd dhthxq4 dhthxq0 dhthxq1 dhthxq2 dhthxq3 dhthxqb dhthxq8 dhthxq7 dhthxqa _5ozg8c3";var we="_5ozg8ce dhthxqb _5ozg8c3",O={transitionDuration:"var(--_5ozg8c0)",zIndexes:{dim:"var(--_5ozg8c1)",paper:"var(--_5ozg8c2)"}};var _t=({backgroundColor:e,dimBackgroundColor:o,borderRadius:r="1rem",onOutsideClick:t,children:a})=>{let n=qt(),{pop:c}=Et(),l=Z(null),s=Z(null);C({styleName:"hide",refs:[l]}),C({styleName:"offset",refs:[s]}),C({styleName:"swipe-back",refs:[s]});let d=Z(!1),f=m=>{t==null||t(m),!m.defaultPrevented&&(d.current||(d.current=!0,c()))},y=m=>{m.stopPropagation()},u=n.zIndex*5+3,g=n.zIndex*5+4;return Y.createElement("div",{className:Le({transitionState:L(n.transitionState)}),ref:l,style:Rt(R({[i.bottomSheet.borderRadius]:r,[i.backgroundColor]:e,[i.dimBackgroundColor]:o,[O.zIndexes.dim]:`${u}`,[O.zIndexes.paper]:`${g}`,[O.transitionDuration]:n.transitionState==="enter-active"||n.transitionState==="exit-active"?"var(--stackflow-transition-duration)":"0ms"}))},Y.createElement("div",{className:Me,ref:s,onClick:f},Y.createElement("div",{className:we,onClick:y},a)))},St=_t;export{ft as AppScreen,gt as BottomSheet,St as Modal,Ue as basicUIPlugin,i as cssVars};
//# sourceMappingURL=index.mjs.map
